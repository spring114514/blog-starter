import { setAttributeIfEmpty, onPress } from './chunk-HQQTSFXD.js';
import { useMedia } from './chunk-ZIBTY3GT.js';
import { TooltipController } from './chunk-HOCVCZPJ.js';
import { FocusVisibleController } from './chunk-VGM6UASR.js';
import { __decorateClass } from './chunk-VPSTUDLO.js';
import { signal, peek, isWriteSignal, onDispose } from 'maverick.js';
import { defineElement, prop, Component, ComponentController } from 'maverick.js/element';
import { ariaBool } from 'maverick.js/std';

var ARIAKeyShortcuts = class extends ComponentController {
  constructor(instance, _shortcut) {
    super(instance);
    this.mc = _shortcut;
  }
  onAttach(el) {
    const { $props, ariaKeys } = useMedia(), keys = el.getAttribute("aria-keyshortcuts");
    if (keys) {
      ariaKeys[this.mc] = keys;
      {
        onDispose(() => {
          delete ariaKeys[this.mc];
        });
      }
      return;
    }
    const shortcuts = $props.keyShortcuts()[this.mc];
    if (shortcuts)
      el.setAttribute("aria-keyshortcuts", shortcuts);
  }
};

// src/player/ui/buttons/toggle-button.tsx
var toggleButtonProps = {
  disabled: false,
  defaultPressed: false,
  defaultAppearance: false
};
var ToggleButton = class extends Component {
  constructor(instance) {
    super(instance);
    this.v = signal(false);
    new FocusVisibleController(instance);
    new TooltipController(instance);
    if (this.na)
      new ARIAKeyShortcuts(instance, this.na);
  }
  get pressed() {
    return peek(this.v);
  }
  onAttach(el) {
    if (isWriteSignal(this.v)) {
      this.v.set(this.$props.defaultPressed());
    }
    setAttributeIfEmpty(el, "tabindex", "0");
    setAttributeIfEmpty(el, "role", "button");
    const { disabled, defaultAppearance } = this.$props;
    this.setAttributes({
      disabled,
      "default-appearance": defaultAppearance,
      "data-pressed": this.v,
      "aria-pressed": this.sg.bind(this),
      "data-media-button": true
    });
  }
  onConnect(el) {
    onPress(el, this.tg.bind(this));
  }
  sg() {
    return ariaBool(this.v());
  }
  H(event) {
    if (isWriteSignal(this.v)) {
      this.v.set((p) => !p);
    }
  }
  tg(event) {
    const disabled = this.$props.disabled();
    if (disabled) {
      if (disabled)
        event.stopImmediatePropagation();
      return;
    }
    event.preventDefault();
    this.H(event);
  }
};
ToggleButton.el = defineElement({
  tagName: "media-toggle-button",
  props: toggleButtonProps
});
__decorateClass([
  prop
], ToggleButton.prototype, "pressed", 1);

export { ToggleButton, toggleButtonProps };
